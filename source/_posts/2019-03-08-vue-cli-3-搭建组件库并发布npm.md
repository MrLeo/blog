---
title: '@vue/cli 3 搭建组件库并发布npm'
abbrlink: 43109cf3
date: 2019-03-08 20:43:33
updated: 2019-03-08 20:43:33
categories: 
- 前端
- npm
tags:
- 前端
- npm
- cli
- dev
- 组件库
- 开发
---



<!--more-->

# 切换tag

回到我们的问题，如果不小心把`1.0.0-alpha.1`直接`npm publish`了，我们该怎么办？

## 查看当前的tag和对应的version。

```bash
npm dist-tag ls
```

通过这个命令，我们可以得到这样的结果：

```bash
latest: 1.0.0
next: 1.0.0-alpha.0
```

如果我们不小心发布了一个`1.0.0-alpha.1`到`latest`，那么我们会得到：

```bash
latest: 1.0.0-alpha.1
next: 1.0.0-alpha.0
```

这个时候我们只要切一下tag就可以挽回局面了。

## 查看my-package发布过的所有版本号

```bash
npm view my-package versions
```

通过这个命令可以得到一个数组：

```bash
[ 
	'0.1.0',
  '1.0.0',
  '1.0.0-alpha.0',
  '1.0.0-alpha.1' 
]
```

## 给my-package设置tag，对应到版本version

```bash
npm dist-tag add my-package@version tag
```

如：

1. 把原来的1.0.0设置成最新的正式版

   ```bash
   $ npm dist-tag add my-package@1.0.0 latest
   ```

2. 把1.0.0-alpha.1更新到最新的测试版

   ```bash
   $ npm dist-tag add my-package@1.0.0-alpha.1 next
   ```

老板再也不用担心我搞出线上故障了。





> [详解：Vue cli3 库模式搭建组件库并发布到 npm](https://juejin.im/post/5bbab9de5188255c8c0cb0e3)