---
title: ã€è½¬è½½ã€‘å¦‚ä½•åšä¸€ä¸ªå¬è¯çš„ â€œè¾“å…¥æ¡†â€
categories:
  - å‰ç«¯
  - css
tags:
  - å‰ç«¯
  - å¼€å‘
  - dev
  - css
  - é€‚é…
  - è¾“å…¥æ¡†
  - è½¬è½½
abbrlink: 511c05eb
date: 2018-06-02 12:34:56
updated: 2018-06-02 12:34:56
---

![](https://ws3.sinaimg.cn/large/006tNc79ly1fthmpshtt8j30za0tk16q.jpg)

# å‰è¨€

åœ¨ç§»åŠ¨ç«¯çš„ web å¼€å‘ä¸­ï¼Œä¸€æèµ·è¾“å…¥æ¡†ï¼Œç¨‹åºçŒ¿ï¼ˆåª›ï¼‰è‚¯å®šæœ‰å¾ˆå¤šå¯ä»¥åæ§½çš„ç‚¹ã€‚

åœ¨è¾“å…¥æ¡†çš„è¿ç”¨ä¸­ï¼Œå°ç¼–ä¹Ÿæ˜¯å¾ˆå¿ƒç´¯å‘€~
ä¸è¿‡ï¼Œç»è¿‡æˆ‘ æ½œï¼ˆcaiï¼‰å¿ƒï¼ˆkengï¼‰ç ”ï¼ˆjiaoï¼‰ç©¶ï¼ˆxunï¼‰ï¼Œä¹Ÿç®—æ˜¯äº†è§£äº†å®ƒçš„è„¾æ€§â€¦ â€¦

ç‰¹åˆ«é¸£è°¢ï¼šå‘¨æ¶µï¼Œå®¶å…´ç­‰

æ­£æ–‡è¿™é‡Œå¼€å§‹ ğŸ‘‡ â€” â€” â€” â€” â€” â€” â€” â€”

<!-- more -->

# é—®é¢˜æ¢ç©¶

### ios ä¸­ï¼Œè¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œé¡µé¢è¾“å…¥æ¡†è¢«é®ç›–ï¼Œå®šä½çš„å…ƒç´ ä½ç½®é”™ä¹±ï¼š

![](https://ws1.sinaimg.cn/large/006tNc79ly1fthmq7s8gzj310e0vqhdt.jpg)

å½“é¡µ input å­˜åœ¨äºå¸é¡¶æˆ–è€…å¸åº•å…ƒç´ ä¸­æ—¶ï¼Œç”¨æˆ·ç‚¹å‡»è¾“å…¥æ¡†ï¼Œè¾“å…¥æ³•å¼¹å‡ºåï¼Œfiexd å¤±æ•ˆï¼Œé¡µé¢ä¸­å®šä½å¥½çš„å…ƒç´ éšå±å¹•æ»šåŠ¨ã€‚

é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆï¼š

- **æ–¹æ¡ˆä¸€ï¼š Web API æ¥å£ ï¼šscrollIntoView** çš„åº”ç”¨ï¼Œå°† input è¾“å…¥æ¡†æ˜¾ç¤ºåœ¨å¯è§†åŒºåŸŸã€‚

  ```javascript
  // è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œå…ƒç´ ç§»åŠ¨åˆ°å¯è§†åŒºåŸŸ
  inputOnFocus(e) {
      setTimeout(function(){
          e.target.scrollIntoView(true);
          // true:å…ƒç´ çš„é¡¶ç«¯å°†å’Œå…¶æ‰€åœ¨æ»šåŠ¨åŒºçš„å¯è§†åŒºåŸŸçš„é¡¶ç«¯å¯¹é½; false:åº•ç«¯å¯¹é½ã€‚
      },200);  // å»¶æ—¶ == é”®ç›˜å¼¹èµ·éœ€è¦æ—¶é—´
  }
  ```

  ä¸€è¡Œä»£ç ï¼Œè½»æ¾æå®šï¼Œè¾“å…¥æ¡†å°±ä¹–ä¹–çš„å‡ºç°åœ¨ä½ çœ¼å‰äº†ã€‚

  ä¸è¿‡æœ‰ç‚¹å°ç¼ºé™·ï¼šé¡µé¢è¿‡é•¿æ—¶ï¼Œç”±äº fixed å¤±æ•ˆï¼Œè¾“å…¥æ¡†ä¾ç„¶ä¹Ÿä¼šè·Ÿç€é¡µé¢æ»‘èµ°ã€‚

  è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå›ºå®šçš„è¾“å…¥æ¡†â€¦â€¦

- **æ–¹æ¡ˆäºŒï¼šåœ¨è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œå°†é¡µé¢æ»‘åŠ¨åˆ°æœ€åº•éƒ¨ï¼Œé¿å… fixed å¯¼è‡´çš„é¡µé¢ä¹±é£ï¼Œå¹¶ä¸”ä¿è¯ input åœ¨æœ€åº•éƒ¨ã€‚**

  ```javascript
  var timerï¼›
  // è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œå°†å…ƒç´ è®¾ç½®ä¸ºposition:staticï¼Œè®¾ç½®timer
  inputOnFocus(e) {
      e.target.style.className = 'input input-static';
      timer = setInterval(
          function() {
              document.body.scrollTop = document.body.scrollHeight
          }, 100)
  }ï¼›
  // è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œå°†å…ƒç´ è®¾ç½®ä¸º position:fixedï¼Œæ¸…é™¤timer
  inputOnbulr(e) {
      e.target.parentNode.className = 'input input-fixed';
      clearInterval(timer)
  }ï¼›
  ```

  ![](https://ws1.sinaimg.cn/large/006tNc79ly1fthmqsb7gnj30s60p07m1.jpg)

  å½“è·å¾—ç„¦ç‚¹å¼¹å‡ºè™šæ‹Ÿé”®ç›˜åï¼Œinput è¾“å…¥æ¡†ä¼šä¸€ç›´ç´§è´´é”®ç›˜é¡¶éƒ¨ã€‚å¦‚æœï¼Œä½ çš„é¡µé¢å¼¹å‡ºè¾“å…¥æ³•åä¸éœ€è¦æ»‘åŠ¨æŸ¥çœ‹å…¶ä»–å†…å®¹ï¼Œé‚£ä¹ˆä½ å¯¹è¿™ç§æ–¹æ¡ˆåº”è¯¥å¾ˆä¸­æ„ã€‚

  Butï¼Œå¯èƒ½ä½ åšçš„æ˜¯ä¸€ä¸ªç±»ä¼¼èŠå¤©çš„é¡µé¢ï¼Œéœ€è¦åœ¨å›å¤æ—¶ï¼ŒæŸ¥çœ‹å†å²æ¶ˆæ¯ï¼Œé‚£ä¹ˆï¼Œè¯·ä½ ç»§ç»­å¾€ä¸‹çœ‹

- **æ–¹æ¡ˆä¸‰ï¼šå°†é¡µé¢è¿›è¡Œæ‹†åˆ†: é¡µé¢ï¼ˆmainï¼‰ = å†…å®¹ï¼ˆsectionAï¼‰ + è¾“å…¥æ¡†ï¼ˆsectionBï¼‰+ å…¶ä»–ï¼ˆsectionOtherï¼‰**

  > **åŸç† ï¼š**
  >
  > main.height = window.screen.height ;
  >
  > sectionA ç»å¯¹å®šä½ï¼Œè¿›è¡Œå†…éƒ¨æ»šåŠ¨ overflow-yï¼šscroll ;
  >
  > sectionB å¯ä¿è¯åœ¨é¡µé¢æœ€åº•éƒ¨ã€‚

  ```css
  .main { position: relative; height: 100%; }
  .sectionA { box-sizing: border-box; padding-bottom: 60px; height: 100%; overflow-y: scroll; -webkit-overflow-scrolling: touch //ä¸ºäº†ä½¿æ»šåŠ¨æµç•…ï¼ŒsectionA æ·»åŠ å±æ€§ }
  .sectionB { position: absolute; height: 60px; overflow: hidden; left: 0; right: 0; bottom: 0; }
  ```

  çº¯ css3 æ‰“é€ ï¼Œå¯ä»¥æ»šåŠ¨ï¼Œå¯ä»¥å›ºå®šä½ç½®,åŸºæœ¬æ»¡è¶³å¤§éƒ¨åˆ†å¸ƒå±€éœ€è¦ã€‚

### IOS ä¸­å•è¡Œè¾“å…¥æ¡†è¾“å…¥å†…å®¹é•¿è¢«é®ç›–ï¼Œä¸èƒ½æ˜¾ç¤ºå…¨éƒ¨ï¼Œä¸”ä¸èƒ½å·¦å³æ»‘åŠ¨ã€‚

è¿™ä¸ªæ˜¯ IOS çš„ä¸€ä¸ª bugï¼Œå¯ä»¥è€ƒè™‘ç”¨ textarea æ›¿æ¢ inputï¼Œè®¾ç½®ä¸€è¡Œçš„é«˜ï¼Œè¿›è¡Œä¸Šä¸‹æ»šåŠ¨æŸ¥çœ‹ã€‚ï¼ˆå…¶ä»–æ–¹æ¡ˆå¯ä»¥å‚çœ‹ä¸‹é¢ ç¬¬ 6 ç‚¹ï¼‰

### è·å¾—ç„¦ç‚¹æ—¶ï¼Œå…‰æ ‡æ¶ˆå¤±æˆ–é”™ä½ï¼š

-webkit-user-select:none å¯¼è‡´ input æ¡†åœ¨ IOS ä¸­æ— æ³•è¾“å…¥ï¼Œå…‰æ ‡ä¸å‡ºç°ï¼Œè®¾ç½®å¦‚ä¸‹

```css
user-select: text;
-webkit-user-select: text;
```

åˆ©ç”¨ scrollIntoView ä½¿å½“å‰å…ƒç´ å‡ºç°åˆ°æŒ‡å®šä½ç½®ï¼Œé¿å…å…‰æ ‡é”™ä½ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š

```javascript
e.target.scrollIntoView(true)
e.target.scrollIntoViewIfNeeded()
```

### è¿›å…¥é¡µé¢å¦‚ä½•è‡ªåŠ¨è·å–ç„¦ç‚¹ï¼Œå¼¹å‡ºè½¯é”®ç›˜ï¼Ÿ

- æ·»åŠ  autofocus å±æ€§ æ”¯æŒè‡ªåŠ¨è·å¾—ç„¦ç‚¹
- è§¦å‘ focus() äº‹ä»¶

### éšæ–‡å­—è¾“å…¥ï¼Œè¾“å…¥æ¡†å®½åº¦è‡ªé€‚åº”ã€‚

```Javascript
onkeyPress(e) {
	const testLength = e.target.value.length;
	e.target.style.width = `${testLength*8+10}px`
}
```

è¿™ç§æ–¹æ¡ˆåŸºæœ¬æ»¡è¶³è‡ªåŠ¨è·å–æ•ˆæœã€‚

testLength _8 è‹±æ–‡å­—ç¬¦ï¼ŒtestLength_ 16 ä¸­æ–‡å­—ç¬¦ï¼Œ +10 ä¸ºåè¾¹å…‰æ ‡é¢„ç•™ä½ç½®ã€‚
è¿™ç§æ–¹æ¡ˆæ˜¾ç„¶ä¸é€‚ç”¨äºå¯¹ç²¾ç¡®åº¦æœ‰å¾ˆé«˜è¦æ±‚çš„éœ€æ±‚ã€‚

### ä»‹ç»ä¸€ä¸ªå±æ€§ï¼šcontenteditableï¼Œæ¨¡æ‹Ÿè¾“å…¥æ—¶åŠ¨æ€è·å–å®½é«˜

- div è®¾ç½® contentditable=true å¯ä»¥å°†æ­¤å…ƒç´ å˜æˆå¯è¾“å…¥çŠ¶æ€ã€‚

  ```
  <div  class="inputContent"  contenteditable="true" ></div>
  ```

- æƒ³è¦å˜æˆ input è¾“å…¥æ¡†ï¼Œåˆ©ç”¨ css æ¨¡æ‹Ÿè¾“å…¥æ¡†çš„æ ·å¼

  ```
  .inputContent{
    color:#444;
    border:#999 solid 1px;
    border-radius: 3px;
    padding: 5px 10px;
    box-sizing: border-box;
    min-width:50px;
    max-width: 300px;
    background: #ffffff;
  }
  ```

  è¿™é‡Œé…åˆ min-widthï¼Œmax-width æ•ˆæœæ›´çœŸå®ã€‚

- ç‚¹å‡» div å¯ä»¥å¼¹å‡ºè½¯é”®ç›˜ï¼Œä½†æ˜¯æ— æ³•è¾“å…¥å†…å®¹ï¼Œéœ€è¦è®¾ç½®å±æ€§ï¼Œå¦‚ä¸‹

  ```
  .inputContent{
    user-select:text;
    -webkit-user-select:text;
  }
  ```

  è¿™æ ·å°±å®Œæˆä¸€ä¸ªå¯ä»¥æ ¹æ®è·å–è¾“å…¥å†…å®¹æ¥åŠ¨æ€æ¥è°ƒèŠ‚å®½é«˜ã€‚

  è¿˜å¯ä»¥åˆ©ç”¨ js æ¨¡æ‹Ÿ placeholder ç­‰ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†

### å…¶ä»–é—®é¢˜åŠè§£å†³

- è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹å¯å¼¹å‡ºè½¯é”®ç›˜ï¼Œå´æ²¡æœ‰å…‰æ ‡é—ªçƒï¼Œä¹Ÿæ— æ³•æ­£å¸¸è¾“å…¥ã€‚

  -webkit-user-select:none å¯¼è‡´çš„ï¼Œå¯ä»¥è¿™æ ·è§£å†³

  ```css
  *:not(input, textarea) {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
  }
  ```

- input è‡ªå®šä¹‰æ ·å¼

  ```css
  // ä½¿ç”¨ä¼ªç±»
  input::-webkit-input-placeholder,
  input::-moz-placeholder,
  input::-ms-input-placeholder {
    ...style text-align: center;
  }
  ```

  å¥½äº†,å°±å†™åˆ°è¿™äº†ï¼Œå¸Œæœ›çœ‹è¿‡åå¯¹ä½ èƒ½æœ‰å¸®åŠ©ã€‚

  è¾“å…¥æ¡†ä¸­çš„å‘è¿˜æ˜¯å¾ˆå¤šäº†ï¼Œæœ¬æ–‡ä¹Ÿéš¾å…ä¼šæœ‰æœ‰å«ç›–ä¸å…¨çš„æƒ…å†µï¼Œæ¬¢è¿å°ä¼™ä¼´ä»¬ç»™æˆ‘ä»¬ç•™è¨€ï¼Œå…±åŒæ¢è®¨ã€‚

> è½¬è½½è‡ªï¼š[å¤§è½¬è½¬ FE - å¦‚ä½•åšä¸€ä¸ªå¬è¯çš„ â€œè¾“å…¥æ¡†â€](https://zzfe.org/#/detail/5a8e3e67e772cd17475c8c6b)
